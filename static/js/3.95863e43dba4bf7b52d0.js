webpackJsonp([3],{"3cXf":function(t,s,e){t.exports={default:e("NUnD"),__esModule:!0}},NUnD:function(t,s,e){var a=e("/KQr"),n=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}},NWQI:function(t,s){},uCMJ:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("3cXf"),n=e.n(a),i={name:"MusicLogin",data:function(){return{showCapture:!1,phone:"",password:"",capture:"",countDown:"发送验证码"}},methods:{sendCapture:function(){var t=this;this.phone?(this.$http.get(this.$api.sendCapture,{params:{phone:this.phone}}).then(function(s){t.$toast("发送成功")}),this.countDown="60s",this.timer=setInterval(function(s){if(parseInt(t.countDown,10)<=0)return t.countDown="发送验证码",void clearInterval(t.timer);t.countDown=parseInt(t.countDown,10)-1+"s"},1e3)):this.$toast("请输入手机号码")},resetPassword:function(){var t=this;this.$http.get(this.$api.verifyCapture,{params:{phone:this.phone,captcha:this.capture}}).then(function(s){if(200===s.data.code)return t.$http.get(t.$api.resetPwd,{params:{phone:t.phone,password:t.password,captcha:t.capture}});t.$toast("验证码错误")}).then(function(s){200===s.data.code&&t.$toast("修改密码成功!")})},login:function(){var t=this;this.$http.get(this.$api.login,{params:{phone:this.phone,password:this.password}}).then(function(s){200===s.data.code&&(window.localStorage.setItem("personal",n()(s.data.profile)),t.$store.dispatch("setPersonInfo",s.data.profile),t.$router.back())})}}},o={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"g-layout"},[e("div",{staticClass:"c-music__login"},[e("div",[e("div",{staticClass:"c-input__contain"},[e("label",{staticClass:"c-input__label"},[t._v("账号")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"c-music__input",attrs:{type:"tel"},domProps:{value:t.phone},on:{input:function(s){s.target.composing||(t.phone=s.target.value)}}})]),t._v(" "),e("div",{staticClass:"c-input__contain"},[e("label",{staticClass:"c-input__label"},[t._v("密码")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"c-music__input",attrs:{type:"password"},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}})]),t._v(" "),t.showCapture?e("div",{staticClass:"c-input__contain c-method__capture"},[e("label",{staticClass:"c-input__label"},[t._v("验证码")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.capture,expression:"capture"}],staticClass:"c-music__input",attrs:{type:"text"},domProps:{value:t.capture},on:{input:function(s){s.target.composing||(t.capture=s.target.value)}}}),t._v(" "),e("label",{staticClass:"c-input__label c-input__capture",on:{click:t.sendCapture}},[t._v(t._s(t.countDown))])]):t._e()]),t._v(" "),e("div",{staticClass:"c-login__method"},[e("span",{staticClass:"c-method__item",on:{click:function(s){t.showCapture=!1}}},[t._v("账号密码")]),t._v(" "),e("span",{staticClass:"c-method__item",on:{click:function(s){t.showCapture=!0}}},[t._v("修改密码")])])]),t._v(" "),e("button",{staticClass:"c-music__submit",on:{click:function(s){t.showCapture?t.resetPassword():t.login()}}},[t._v(t._s(t.showCapture?"修改密码":"登录"))])])},staticRenderFns:[]};var c=e("C7Lr")(i,o,!1,function(t){e("NWQI")},"data-v-312f2e40",null);s.default=c.exports}});